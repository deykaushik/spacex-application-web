@import './_base.scss';
@import './_mixins.scss';

$upcoming-first-margin: 30px;

// Supportive Style
@mixin steps-track-line {
   content: '';
   position: absolute;
   width: 2px;
   background: $divider-primary;
   left: 50%;
   z-index: 1;
}



// Workflow Custom Style
.work-flow {
   width: 100%;
   .block {
      padding: 0 15px;
      max-width: $workflow-width;
      margin: 0 auto;
      .steps-track {
         width: $steps-track-width;
         margin-right: $steps-track-margin-right;
         position: relative;
         z-index: 2;
         display: none;
      }

      .step-circle {
         display: block;
         margin: 0 auto;
         background: $workflow-step-circle-bg-color;
         @include border-radius(50%);
         text-align: center;
         color: $workflow-step-circle-color;
         border: 2px solid $workflow-step-circle-border;
      }

      .step-small {
         @extend .step-circle;
         width: $step-small-size;
         height: $step-small-size;
         line-height: $step-small-size;
      }

      .step-large {
         @extend .step-circle;
         width: $step-large-size;
         height: $step-large-size;
         line-height: $step-large-size;
      }

      .steps-block {
         line-height: 1.3;
         margin: 0;
         color: $text-color-primary;
         padding: 0;
      }

      .mob {
         @include flexbox();
         @include align-items(center);

         .step-small,
         .step-large {
            margin-right: $mob-margin-right;
         }

         .step-small {
            width: $step-small-size-sm;
            height: $step-small-size-sm;
            line-height: $step-small-size-sm;
          }

          .step-large {
            width: $step-large-size-sm;
            height: $step-large-size-sm;
            line-height: $step-large-size-sm;
            font-size: $font-sm;
          }

         .step-title {
            @include flex(1);
         }
      }

      .success {
         position: relative;
         display: block;
         width: 18px;
         height: 15px;
         line-height: 15px;
         left: 50%;
         top: 50%;
         @include translate(-50%, -50%);

         &::before {
            display: block;
            position: absolute;
         }
      }
   }

   .status {
      background: $workflow-bg;
      padding: 20px 0;
      position: relative;

      .block {
         @include align-items(stretch);
         margin-bottom: $status-step-margin;

         .steps-track {
            &::after {
               @include steps-track-line;
               height: calc( 100% - #{$step-small-size} + #{$status-step-margin} );
            }
         }

         &:last-of-type {
            margin-bottom: 0;

            .steps-track {
               &::after {
                  height: calc( 100% - #{$step-small-size} + #{$status-padding} );
               }
            }
         }

         .step-title {
              word-break: break-word;

            .edit-link {
               display: inline-block;
               color: $workflow-edit-link-color;
               cursor: pointer;
               font-weight: bold;
               text-decoration: none;
               word-break: normal;
               background: transparent;
               border: 0;
            }
         }
      }
   }

   .current-steps {
      background: $workflow-step-current-bg;

      .section-title {
         line-height: $section-title-size;
      }

      .block {
         .steps-track,
         .steps-block {
            padding: 40px 0;
         }

         .steps-track {
            &::after {
               @include steps-track-line;
               height: calc( 100% - #{$step-large-size + $current-steps-padding});
            }

            &.more::before {
               @include steps-track-line;
               top: 0;
               height: $current-steps-padding;
            }

            &.less::after {
               display: none;
            }
         }
      }
   }

   .upcoming-steps {
      background: $workflow-bg;
      padding: 20px 0;

      .block {
         @include align-items(stretch);

         &.gd-row {
            padding-bottom: $status-step-margin;
            &:last-of-type {
               padding-bottom: 0;
            }
         }

         .para-title {
            margin: 0 0 0 ($mob-margin-right + $step-small-size);
         }

         &:first-of-type {
            margin-top: 0;
            margin-bottom: 20px;

            .steps-track {
               width: $step-large-size;

               &::before {
                  @include steps-track-line;
                  height: calc( 100% + #{$upcoming-padding} );
                  bottom: 0;
               }
               &::after{
                 height: $upcoming-first-margin;
                 top: 100%;
               }
            }
         }

         &:last-of-type {
            .steps-track {
               &::after {
                  display: none;
               }
            }
         }

         .steps-track {
            &::before {
               @include steps-track-line;
               height: $upcoming-step-margin;
               bottom: 100%;
            }

            &::after {
               @include steps-track-line;
               height: calc( 100% - #{$step-small-size} + #{$status-padding} );
            }
         }

         .step-title {
            word-break: break-word;
         }
      }
   }
   &.can-canceled{
     .cancel-btn{
       display: none;
     }
   }
}

@media (min-width: $media-sm) {
  .work-flow {
      .status {
         padding: $status-padding 0;
         .block{
            .steps-block {
               @include flexbox();
               @include align-items(center);
            }
         }
      }
      .block {
         @include flexbox();
         width: $workflow-width-sm;
         max-width: none;
         @include flexbox();
         .mob {
            .step-small,
            .step-large {
               display: none;
            }
         }

         .steps-block {
            @include flex(1);
         }

         .steps-track {
            display: block;
         }
      }

      .current-steps {
         .block {
            .mob {
               .section-title {
                  margin: 18px 0;
               }
            }
            .steps-track,
            .steps-block {
               padding: $current-steps-padding 0;
            }
         }
      }

      .upcoming-steps {
         padding: $status-padding 0;
         .block {
            .para-title {
               margin-left: 0;
            }
            &.gd-row {
               padding-bottom: $status-step-margin;
               &:last-of-type {
                  padding-bottom: 0;
               }
            }

            &:first-of-type {
              margin-bottom: $upcoming-first-margin;
            }
            .steps-block {
               @include flexbox();
               @include align-items(center);
               .upcomming-step-block{
                 @include flex(1);
               }
            }
         }
      }
      &.final-status{
        .block{
          .steps-track{
            width: 55px;
            height: 55px;
            margin-right: 50px;
          }
        }
      }
   }
}

@media (min-width: $media-md) {
  .work-flow{
    &.can-canceled{
     .cancel-btn{
       position: absolute;
       right: 100px;
       width: auto;
       display: inline-block;
     }
   }
  }
}

@media (min-width: $media-lg) {
   .work-flow {
      .block {
         width: $workflow-width-lg;
      }
   }
}
